# Manual Testing Scripts

Автоматизированные скрипты для проведения мануальных тестов GitProc внутри Docker-контейнера.

## Файлы

- **run_manual_tests.bat** - скрипт для Windows
- **run_manual_tests.sh** - скрипт для Linux/Mac

## Что тестируется

Скрипты автоматически выполняют следующие тесты:

1. ✓ Сборка и запуск Docker-контейнера
2. ✓ Проверка CLI help команды
3. ✓ Инициализация GitProc
4. ✓ Создание тестового сервиса
5. ✓ Коммит сервиса в Git
6. ✓ Запуск daemon
7. ✓ Запуск сервиса
8. ✓ Проверка статуса сервиса
9. ✓ Проверка логов сервиса
10. ✓ Перезапуск сервиса
11. ✓ Обновление сервиса и откат (rollback) через Git
12. ✓ Остановка сервиса
13. ✓ Список всех сервисов

## Использование

### Windows

```cmd
run_manual_tests.bat
```

### Linux/Mac

```bash
chmod +x run_manual_tests.sh
./run_manual_tests.sh
```

## Результаты

В конце выполнения скрипт выводит:

```
========================================
TEST SUMMARY
========================================
Total Passed: 13
Total Failed: 0
========================================
Result: ALL TESTS PASSED
```

Каждый тест помечается как `[PASS]` или `[FAIL]` в процессе выполнения.

## Требования

- Docker и docker-compose установлены и запущены
- Проект GitProc с корректным docker-compose.yml
- Для Linux/Mac: bash shell

## Примечания

- Скрипты НЕ очищают контейнеры автоматически - используйте `docker-compose down -v` после тестов
- Все временные файлы создаются внутри контейнера
- Тесты выполняются последовательно с необходимыми задержками
- Exit code 0 = все тесты прошли, 1 = есть ошибки
- Тест rollback проверяет фактическое содержимое файла после отката, а не логи

## Особенности тестов

### Тест Rollback
Этот тест:
1. Обновляет скрипт сервиса (добавляет "UPDATED" в вывод)
2. Коммитит изменения в Git
3. Перезапускает сервис
4. Проверяет, что новая версия работает (логи содержат "UPDATED")
5. Выполняет rollback к предыдущему коммиту
6. Проверяет содержимое файла скрипта (не должно содержать "UPDATED")

Важно: проверяется именно файл, а не логи, так как старые логи могут содержать "UPDATED" даже после rollback.
